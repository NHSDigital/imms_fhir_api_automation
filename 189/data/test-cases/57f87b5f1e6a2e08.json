{"uid":"57f87b5f1e6a2e08","name":"Scenario Outline name: Verify that the Update API will be fails if recorded has future or invalid formatted date","fullName":"features.APITests.steps.test_update_steps#test_scenario_outline_name_verify_that_the_update_api_will_be_fails_if_recorded_has_future_or_invalid_formatted_date","historyId":"031750f1278f82e349880a69b6eafcac","time":{"start":1765889655681,"stop":1765889666545,"duration":10864},"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/update.feature: Scenario Outline name: Verify that the Update API will be fails if recorded has future or invalid formatted date","descriptionHtml":"<p>/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/update.feature: Scenario Outline name: Verify that the Update API will be fails if recorded has future or invalid formatted date</p>\n","status":"failed","statusMessage":"AssertionError: Expected status code 204, but got 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}\nassert 502 == 204\n +  where 502 = <Response [502]>.status_code\n +    where <Response [502]> = <utilities.context.ScenarioContext object at 0x7f100883ccd0>.response","statusTrace":"self = <HookCaller 'pytest_bdd_after_scenario'>\nkwargs = {'feature': Feature(scenarios=OrderedDict([('Verify that the Update API will be successful with all the valid paramete...tion='', tags={'Delete_cleanUp', 'patient_id_Mod11_NHS', 'vaccine_type_RSV', 'supplier_name_Postman_Auth'}, rule=None)}\nfirstresult = False\n\n    def __call__(self, **kwargs: object) -> Any:\n        \"\"\"Call the hook.\n    \n        Only accepts keyword arguments, which should match the hook\n        specification.\n    \n        Returns the result(s) of calling all registered plugins, see\n        :ref:`calling`.\n        \"\"\"\n        assert (\n            not self.is_historic()\n        ), \"Cannot directly call a historic hook - use call_historic instead.\"\n        self._verify_all_args_are_provided(kwargs)\n        firstresult = self.spec.opts.get(\"firstresult\", False) if self.spec else False\n        # Copy because plugins may register other plugins during iteration (#438).\n>       return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\nvenv/lib/python3.11/site-packages/pluggy/_hooks.py:513: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nvenv/lib/python3.11/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nrequest = <FixtureRequest for <Function test_scenario_outline_name_verify_that_the_update_api_will_be_fails_if_recorded_has_future_or_invalid_formatted_date[empty]>>\nfeature = Feature(scenarios=OrderedDict([('Verify that the Update API will be successful with all the valid parameters', Scenari... the immunization of a patient', tags={'functional', 'Update_Feature'}, background=None, line_number=2, description='')\nscenario = Scenario(feature=Feature(scenarios=OrderedDict([('Verify that the Update API will be successful with all the valid par...ption='', tags={'Delete_cleanUp', 'patient_id_Mod11_NHS', 'vaccine_type_RSV', 'supplier_name_Postman_Auth'}, rule=None)\n\n    def pytest_bdd_after_scenario(request, feature, scenario):\n        tags = set(getattr(scenario, 'tags', [])) | set(getattr(feature, 'tags', []))\n        context = request.getfixturevalue('context')\n        get_delete_url_header(context)\n    \n        if 'Delete_cleanUp' in tags:\n            if context.ImmsID is not None:\n                print(f\"\\n Delete Request is {context.url}/{context.ImmsID}\")\n                context.response = requests.delete(f\"{context.url}/{context.ImmsID}\", headers=context.headers)\n>               assert context.response.status_code == 204, f\"Expected status code 204, but got {context.response.status_code}. Response: {context.response.json()}\"\nE               AssertionError: Expected status code 204, but got 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}\nE               assert 502 == 204\nE                +  where 502 = <Response [502]>.status_code\nE                +    where <Response [502]> = <utilities.context.ScenarioContext object at 0x7f100883ccd0>.response\n\nfeatures/conftest.py:87: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1765889177875,"stop":1765889177876,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1765889177878,"stop":1765889179636,"duration":1758},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1765889655681,"stop":1765889656794,"duration":1113},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1765889695578,"stop":1765889695578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/update.feature: Scenario Outline name: Verify that the Update API will be fails if recorded has future or invalid formatted date","status":"failed","statusMessage":"AssertionError: Expected status code 204, but got 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}\nassert 502 == 204\n +  where 502 = <Response [502]>.status_code\n +    where <Response [502]> = <utilities.context.ScenarioContext object at 0x7f100883ccd0>.response","statusTrace":"self = <HookCaller 'pytest_bdd_after_scenario'>\nkwargs = {'feature': Feature(scenarios=OrderedDict([('Verify that the Update API will be successful with all the valid paramete...tion='', tags={'Delete_cleanUp', 'patient_id_Mod11_NHS', 'vaccine_type_RSV', 'supplier_name_Postman_Auth'}, rule=None)}\nfirstresult = False\n\n    def __call__(self, **kwargs: object) -> Any:\n        \"\"\"Call the hook.\n    \n        Only accepts keyword arguments, which should match the hook\n        specification.\n    \n        Returns the result(s) of calling all registered plugins, see\n        :ref:`calling`.\n        \"\"\"\n        assert (\n            not self.is_historic()\n        ), \"Cannot directly call a historic hook - use call_historic instead.\"\n        self._verify_all_args_are_provided(kwargs)\n        firstresult = self.spec.opts.get(\"firstresult\", False) if self.spec else False\n        # Copy because plugins may register other plugins during iteration (#438).\n>       return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\nvenv/lib/python3.11/site-packages/pluggy/_hooks.py:513: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nvenv/lib/python3.11/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nrequest = <FixtureRequest for <Function test_scenario_outline_name_verify_that_the_update_api_will_be_fails_if_recorded_has_future_or_invalid_formatted_date[empty]>>\nfeature = Feature(scenarios=OrderedDict([('Verify that the Update API will be successful with all the valid parameters', Scenari... the immunization of a patient', tags={'functional', 'Update_Feature'}, background=None, line_number=2, description='')\nscenario = Scenario(feature=Feature(scenarios=OrderedDict([('Verify that the Update API will be successful with all the valid par...ption='', tags={'Delete_cleanUp', 'patient_id_Mod11_NHS', 'vaccine_type_RSV', 'supplier_name_Postman_Auth'}, rule=None)\n\n    def pytest_bdd_after_scenario(request, feature, scenario):\n        tags = set(getattr(scenario, 'tags', [])) | set(getattr(feature, 'tags', []))\n        context = request.getfixturevalue('context')\n        get_delete_url_header(context)\n    \n        if 'Delete_cleanUp' in tags:\n            if context.ImmsID is not None:\n                print(f\"\\n Delete Request is {context.url}/{context.ImmsID}\")\n                context.response = requests.delete(f\"{context.url}/{context.ImmsID}\", headers=context.headers)\n>               assert context.response.status_code == 204, f\"Expected status code 204, but got {context.response.status_code}. Response: {context.response.json()}\"\nE               AssertionError: Expected status code 204, but got 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}\nE               assert 502 == 204\nE                +  where 502 = <Response [502]>.status_code\nE                +    where <Response [502]> = <utilities.context.ScenarioContext object at 0x7f100883ccd0>.response\n\nfeatures/conftest.py:87: AssertionError","steps":[],"attachments":[{"uid":"f37da2e524b58d2d","name":"Step Passed: I have created a valid vaccination record","source":"f37da2e524b58d2d.txt","type":"text/plain","size":60},{"uid":"c4755e6716f3715a","name":"Step Passed: Send a update for Immunization event created with recorded being updated to 'empty'","source":"c4755e6716f3715a.txt","type":"text/plain","size":102},{"uid":"389b6fa1bb40d953","name":"Step Passed: The request will be unsuccessful with the status code '400'","source":"389b6fa1bb40d953.txt","type":"text/plain","size":78},{"uid":"868dc6d0250fdadb","name":"Step Passed: The Response JSONs should contain correct error message for 'invalid_recorded'","source":"868dc6d0250fdadb.txt","type":"text/plain","size":97},{"uid":"657ef04f6f0b95f2","name":"stdout","source":"657ef04f6f0b95f2.txt","type":"text/plain","size":8888}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":5,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Update the immunization of a patient"},{"name":"feature","value":"Update the immunization of a patient"},{"name":"tag","value":"supplier_name_Postman_Auth"},{"name":"tag","value":"functional"},{"name":"tag","value":"patient_id_Mod11_NHS"},{"name":"tag","value":"Update_Feature"},{"name":"tag","value":"Delete_cleanUp"},{"name":"tag","value":"vaccine_type_RSV"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervm6qbrg"},{"name":"thread","value":"2537-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_update_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"_pytest_bdd_example","value":"{'Date': 'empty'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":25,"unknown":0,"total":27},"items":[{"uid":"42a9a0baa1e85d7","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/188/#testresult/42a9a0baa1e85d7","status":"passed","time":{"start":1765877648959,"stop":1765877652652,"duration":3693}},{"uid":"80fb7b036a568ec7","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/187/#testresult/80fb7b036a568ec7","status":"passed","time":{"start":1765819137307,"stop":1765819144073,"duration":6766}},{"uid":"dc4042b83f2521d3","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/181/#testresult/dc4042b83f2521d3","status":"passed","time":{"start":1765546307590,"stop":1765546313444,"duration":5854}},{"uid":"212adbe4337c65a5","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/180/#testresult/212adbe4337c65a5","status":"broken","statusDetails":"requests.exceptions.InvalidURL: URL has an invalid label.","time":{"start":1765545420676,"stop":1765545420678,"duration":2}},{"uid":"7c365b8fe917d713","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/179/#testresult/7c365b8fe917d713","status":"passed","time":{"start":1765466218716,"stop":1765466223022,"duration":4306}},{"uid":"5c77b99325bc7c82","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/177/#testresult/5c77b99325bc7c82","status":"passed","time":{"start":1765398909211,"stop":1765398914549,"duration":5338}},{"uid":"d71cc7bfbeaade70","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/176/#testresult/d71cc7bfbeaade70","status":"passed","time":{"start":1765385383351,"stop":1765385386311,"duration":2960}},{"uid":"b5692edff6eaa411","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/175/#testresult/b5692edff6eaa411","status":"passed","time":{"start":1765001098858,"stop":1765001103962,"duration":5104}},{"uid":"a55a3977ece6efa0","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/173/#testresult/a55a3977ece6efa0","status":"passed","time":{"start":1764972795752,"stop":1764972798822,"duration":3070}},{"uid":"92a50397d9276fb5","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/171/#testresult/92a50397d9276fb5","status":"passed","time":{"start":1764333410647,"stop":1764333413418,"duration":2771}},{"uid":"d2fc44354de71a39","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/170/#testresult/d2fc44354de71a39","status":"passed","time":{"start":1764257126643,"stop":1764257131464,"duration":4821}},{"uid":"56742f974fe60dc7","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/169/#testresult/56742f974fe60dc7","status":"passed","time":{"start":1764236460021,"stop":1764236464114,"duration":4093}},{"uid":"a824300e58577009","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/168/#testresult/a824300e58577009","status":"passed","time":{"start":1764231480864,"stop":1764231485160,"duration":4296}},{"uid":"330997f2838759ee","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/167/#testresult/330997f2838759ee","status":"passed","time":{"start":1764184375054,"stop":1764184378801,"duration":3747}},{"uid":"51da58e6e909310f","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/166/#testresult/51da58e6e909310f","status":"passed","time":{"start":1764183117842,"stop":1764183121579,"duration":3737}},{"uid":"62b1af28d603ee1c","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/165/#testresult/62b1af28d603ee1c","status":"passed","time":{"start":1764182400238,"stop":1764182404097,"duration":3859}},{"uid":"d0f08ddc4fe0b6ea","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/164/#testresult/d0f08ddc4fe0b6ea","status":"passed","time":{"start":1764148168355,"stop":1764148171916,"duration":3561}},{"uid":"76e71003695f5b2f","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/162/#testresult/76e71003695f5b2f","status":"passed","time":{"start":1764003470533,"stop":1764003474669,"duration":4136}},{"uid":"4a50d52b4d4f3b6f","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/159/#testresult/4a50d52b4d4f3b6f","status":"passed","time":{"start":1763998466132,"stop":1763998468951,"duration":2819}},{"uid":"d0ab7765309612cc","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/158/#testresult/d0ab7765309612cc","status":"passed","time":{"start":1763997157967,"stop":1763997162029,"duration":4062}}]},"tags":["functional","Update_Feature","supplier_name_Postman_Auth","patient_id_Mod11_NHS","Delete_cleanUp","vaccine_type_RSV"]},"source":"57f87b5f1e6a2e08.json","parameterValues":["{'Date': 'empty'}"]}
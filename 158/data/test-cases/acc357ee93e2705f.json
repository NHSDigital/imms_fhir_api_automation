{"uid":"acc357ee93e2705f","name":"Verify that the Delete API will be successful with all the valid parameters","fullName":"features.APITests.steps.test_delete_steps#test_verify_that_the_delete_api_will_be_successful_with_all_the_valid_parameters","historyId":"09a33b74dee88fba7ed44b1b90ac5467","time":{"start":1763996837023,"stop":1763996841071,"duration":4048},"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/delete.feature: Verify that the Delete API will be successful with all the valid parameters","descriptionHtml":"<p>/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/delete.feature: Verify that the Delete API will be successful with all the valid parameters</p>\n","status":"broken","statusMessage":"TypeError: fetch_immunization_int_delta_detail_by_immsID() got an unexpected keyword argument 'expected_version'","statusTrace":"fixturefunc = <function validate_imms_delta_table_by_ImmsID at 0x7f2e06109ee0>\nrequest = <FixtureRequest for <Function test_verify_that_the_delete_api_will_be_successful_with_all_the_valid_parameters>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f2e04f39a90>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f2e04f39a90>\n\n    @then('The delta table will be populated with the correct data for deleted event')\n    def validate_imms_delta_table_by_ImmsID(context):\n        create_obj = context.create_object\n>       items = fetch_immunization_int_delta_detail_by_immsID(context.aws_profile_name, context.ImmsID, context.S3_env, expected_version=2)\nE       TypeError: fetch_immunization_int_delta_detail_by_immsID() got an unexpected keyword argument 'expected_version'\n\nfeatures/APITests/steps/test_delete_steps.py:33: TypeError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1763996646162,"stop":1763996646162,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1763996646165,"stop":1763996647821,"duration":1656},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1763996837023,"stop":1763996837023,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1763996837023,"stop":1763996838827,"duration":1804},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/delete.feature: Verify that the Delete API will be successful with all the valid parameters","status":"broken","statusMessage":"TypeError: fetch_immunization_int_delta_detail_by_immsID() got an unexpected keyword argument 'expected_version'","statusTrace":"fixturefunc = <function validate_imms_delta_table_by_ImmsID at 0x7f2e06109ee0>\nrequest = <FixtureRequest for <Function test_verify_that_the_delete_api_will_be_successful_with_all_the_valid_parameters>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f2e04f39a90>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f2e04f39a90>\n\n    @then('The delta table will be populated with the correct data for deleted event')\n    def validate_imms_delta_table_by_ImmsID(context):\n        create_obj = context.create_object\n>       items = fetch_immunization_int_delta_detail_by_immsID(context.aws_profile_name, context.ImmsID, context.S3_env, expected_version=2)\nE       TypeError: fetch_immunization_int_delta_detail_by_immsID() got an unexpected keyword argument 'expected_version'\n\nfeatures/APITests/steps/test_delete_steps.py:33: TypeError","steps":[],"attachments":[{"uid":"503fe76985305db7","name":"Step Passed: I have created a valid vaccination record","source":"503fe76985305db7.txt","type":"text/plain","size":60},{"uid":"3e1480046e9edb25","name":"Step Passed: Send a delete for Immunization event created","source":"3e1480046e9edb25.txt","type":"text/plain","size":63},{"uid":"ee590c62830c2451","name":"Step Passed: The request will be successful with the status code '204'","source":"ee590c62830c2451.txt","type":"text/plain","size":76},{"uid":"d9870b18f473f5fd","name":"Step Passed: The X-Request-ID and X-Correlation-ID keys in header will populate correctly","source":"d9870b18f473f5fd.txt","type":"text/plain","size":95},{"uid":"e218b8c07e0de7a0","name":"Step Passed: The imms event table will be populated with the correct data for 'deleted' event","source":"e218b8c07e0de7a0.txt","type":"text/plain","size":99},{"uid":"fea6332f46e42bfd","name":"Step Failed: The delta table will be populated with the correct data for deleted event","source":"fea6332f46e42bfd.txt","type":"text/plain","size":205},{"uid":"e9b598c168049d77","name":"stdout","source":"e9b598c168049d77.txt","type":"text/plain","size":9057}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Delete an immunization of a patient"},{"name":"feature","value":"Delete an immunization of a patient"},{"name":"tag","value":"patient_id_Random"},{"name":"tag","value":"functional"},{"name":"tag","value":"Delete_Feature"},{"name":"tag","value":"vaccine_type_RSV"},{"name":"tag","value":"supplier_name_RAVS"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2510-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_delete_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":6,"unknown":0,"total":7},"items":[{"uid":"474fe2b2362ebd1a","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/157/#testresult/474fe2b2362ebd1a","status":"passed","time":{"start":1763992925312,"stop":1763992928401,"duration":3089}},{"uid":"eaeeeffd155d48ab","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/156/#testresult/eaeeeffd155d48ab","status":"passed","time":{"start":1763555614913,"stop":1763555619259,"duration":4346}},{"uid":"385c431b0db0372e","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/155/#testresult/385c431b0db0372e","status":"passed","time":{"start":1763366630205,"stop":1763366634938,"duration":4733}},{"uid":"2b831d3c8b915d51","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/154/#testresult/2b831d3c8b915d51","status":"passed","time":{"start":1763049313006,"stop":1763049316466,"duration":3460}},{"uid":"232a94101f58efee","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/153/#testresult/232a94101f58efee","status":"passed","time":{"start":1763046584389,"stop":1763046589046,"duration":4657}},{"uid":"e2f7e24c173c4384","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/152/#testresult/e2f7e24c173c4384","status":"passed","time":{"start":1763039743522,"stop":1763039749436,"duration":5914}}]},"tags":["functional","Delete_Feature","patient_id_Random","supplier_name_RAVS","vaccine_type_RSV"]},"source":"acc357ee93e2705f.json","parameterValues":[]}
{"uid":"b2eaed467dcafec9","name":"Verify that VACCINATION PROCEDURE TERM, VACCINE PRODUCT TERM, SITE OF VACCINATION TERM, ROUTE OF VACCINATION TERM fields are blank in imms delta table if no text or value string or display field is present","fullName":"features.APITests.steps.test_create_steps#test_verify_that_vaccination_procedure_term_vaccine_product_term_site_of_vaccination_term_route_of_vaccination_term_fields_are_blank_in_imms_delta_table_if_no_text_or_value_string_or_display_field_is_present","historyId":"289e074ac9775921d811d7083129dd68","time":{"start":1766419536386,"stop":1766419543338,"duration":6952},"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/create.feature: Verify that VACCINATION_PROCEDURE_TERM, VACCINE_PRODUCT_TERM, SITE_OF_VACCINATION_TERM, ROUTE_OF_VACCINATION_TERM fields are blank in imms delta table if no text or value string or display field is present","descriptionHtml":"<p>/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/create.feature: Verify that VACCINATION_PROCEDURE_TERM, VACCINE_PRODUCT_TERM, SITE_OF_VACCINATION_TERM, ROUTE_OF_VACCINATION_TERM fields are blank in imms delta table if no text or value string or display field is present</p>\n","status":"failed","statusMessage":"AssertionError: \n Expected status code: 201, but got: 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}","statusTrace":"fixturefunc = <function The_request_will_have_status_code at 0x7f6caee40ae0>\nrequest = <FixtureRequest for <Function test_verify_that_vaccination_procedure_term_vaccine_product_term_site_of_vaccination_term_route_of_vaccination_term_fields_are_blank_in_imms_delta_table_if_no_text_or_value_string_or_display_field_is_present>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f6cae2ced50>, 'statusCode': '201'}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f6cae2ced50>\nstatusCode = '201'\n\n    @then(parsers.parse(\"The request will be unsuccessful with the status code '{statusCode}'\"))\n    @then(parsers.parse(\"The request will be successful with the status code '{statusCode}'\"))\n    def The_request_will_have_status_code(context, statusCode):\n        print(context.response.status_code)\n        print(int(statusCode))\n>       assert context.response.status_code == int(statusCode), f\"\\n Expected status code: {statusCode}, but got: {context.response.status_code}. Response: {context.response.json()} \\n\"\nE       AssertionError: \nE        Expected status code: 201, but got: 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}\n\nfeatures/APITests/steps/common_steps.py:66: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1766419436304,"stop":1766419436304,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1766419436307,"stop":1766419438006,"duration":1699},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1766419536386,"stop":1766419536386,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1766419536387,"stop":1766419537496,"duration":1109},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/create.feature: Verify that VACCINATION_PROCEDURE_TERM, VACCINE_PRODUCT_TERM, SITE_OF_VACCINATION_TERM, ROUTE_OF_VACCINATION_TERM fields are blank in imms delta table if no text or value string or display field is present","status":"failed","statusMessage":"AssertionError: \n Expected status code: 201, but got: 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}","statusTrace":"fixturefunc = <function The_request_will_have_status_code at 0x7f6caee40ae0>\nrequest = <FixtureRequest for <Function test_verify_that_vaccination_procedure_term_vaccine_product_term_site_of_vaccination_term_route_of_vaccination_term_fields_are_blank_in_imms_delta_table_if_no_text_or_value_string_or_display_field_is_present>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f6cae2ced50>, 'statusCode': '201'}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f6cae2ced50>\nstatusCode = '201'\n\n    @then(parsers.parse(\"The request will be unsuccessful with the status code '{statusCode}'\"))\n    @then(parsers.parse(\"The request will be successful with the status code '{statusCode}'\"))\n    def The_request_will_have_status_code(context, statusCode):\n        print(context.response.status_code)\n        print(int(statusCode))\n>       assert context.response.status_code == int(statusCode), f\"\\n Expected status code: {statusCode}, but got: {context.response.status_code}. Response: {context.response.json()} \\n\"\nE       AssertionError: \nE        Expected status code: 201, but got: 502. Response: {'fault': {'faultstring': 'Unexpected EOF at target', 'detail': {'errorcode': 'messaging.adaptors.http.flow.UnexpectedEOFAtTarget'}}}\n\nfeatures/APITests/steps/common_steps.py:66: AssertionError","steps":[],"attachments":[{"uid":"2c4cd549da53fb5a","name":"Step Passed: Valid json payload is created where vaccination terms has no text or value string or display field","source":"2c4cd549da53fb5a.txt","type":"text/plain","size":117},{"uid":"a35a55448f565246","name":"Step Passed: Trigger the post create request","source":"a35a55448f565246.txt","type":"text/plain","size":50},{"uid":"7f87bd5c84e3b29e","name":"Step Failed: The request will be successful with the status code '201'","source":"7f87bd5c84e3b29e.txt","type":"text/plain","size":276},{"uid":"503e1a92a506e84b","name":"stdout","source":"503e1a92a506e84b.txt","type":"text/plain","size":2619}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Create the immunization event for a patient"},{"name":"feature","value":"Create the immunization event for a patient"},{"name":"tag","value":"Delete_cleanUp"},{"name":"tag","value":"vaccine_type_HIB"},{"name":"tag","value":"patient_id_Random"},{"name":"tag","value":"functional"},{"name":"tag","value":"Create_Feature"},{"name":"tag","value":"supplier_name_TPP"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervmh13bl"},{"name":"thread","value":"2575-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_create_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":7,"unknown":0,"total":8},"items":[{"uid":"8ca671e1742d56a6","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/204/#testresult/8ca671e1742d56a6","status":"passed","time":{"start":1766418555240,"stop":1766418559162,"duration":3922}},{"uid":"5646d1ec4ee69b00","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/202/#testresult/5646d1ec4ee69b00","status":"passed","time":{"start":1766413327564,"stop":1766413331166,"duration":3602}},{"uid":"c4fe017d64f54e74","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/200/#testresult/c4fe017d64f54e74","status":"passed","time":{"start":1766412961009,"stop":1766412964035,"duration":3026}},{"uid":"3eb65f36d05c9b8f","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/199/#testresult/3eb65f36d05c9b8f","status":"passed","time":{"start":1766268969380,"stop":1766268973175,"duration":3795}},{"uid":"4481ce1c62cec704","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/197/#testresult/4481ce1c62cec704","status":"passed","time":{"start":1766170576973,"stop":1766170590501,"duration":13528}},{"uid":"c7a3096526ee08b6","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/196/#testresult/c7a3096526ee08b6","status":"passed","time":{"start":1765967338709,"stop":1765967345287,"duration":6578}},{"uid":"96f9cac0da448190","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/194/#testresult/96f9cac0da448190","status":"passed","time":{"start":1765899286738,"stop":1765899290478,"duration":3740}}]},"tags":["functional","supplier_name_TPP","vaccine_type_HIB","Create_Feature","patient_id_Random","Delete_cleanUp"]},"source":"b2eaed467dcafec9.json","parameterValues":[]}
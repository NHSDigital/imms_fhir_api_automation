{"uid":"8b1e84edfd6e87ce","name":"Flu event is created and search post request fetch the only one record matched with identifier and  elements","fullName":"features.APITests.steps.test_search_steps#test_flu_event_is_created_and_search_post_request_fetch_the_only_one_record_matched_with_identifier_and__elements","historyId":"8ada31ffca5617ba5baa028f6545cb97","time":{"start":1765546222251,"stop":1765546228419,"duration":6168},"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/search.feature: Flu event is created and search post request fetch the only one record matched with identifier and _elements","descriptionHtml":"<p>/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/search.feature: Flu event is created and search post request fetch the only one record matched with identifier and _elements</p>\n","status":"failed","statusMessage":"AssertionError: link[0].url should start with 'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4', got 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'\nassert False\n +  where False = <built-in method startswith of str object at 0x7f026877af10>('https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4')\n +    where <built-in method startswith of str object at 0x7f026877af10> = 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'.startswith\n +    and   'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4' = <utilities.context.ScenarioContext object at 0x7f026897ca90>.baseUrl","statusTrace":"fixturefunc = <function validate_correct_immunization_event_with_elements at 0x7f0269474f40>\nrequest = <FixtureRequest for <Function test_flu_event_is_created_and_search_post_request_fetch_the_only_one_record_matched_with_identifier_and__elements>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f026897ca90>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f026897ca90>\n\n    @then('correct immunization event is returned in the response with only specified elements')\n    def validate_correct_immunization_event_with_elements(context):\n        response = context.response.json()\n        assert response.get(\"resourceType\") == \"Bundle\", \"resourceType should be 'Bundle'\"\n        assert response.get(\"type\") == \"searchset\", \"type should be 'searchset'\"\n        assert isinstance(response.get(\"entry\"), list) and len(response[\"entry\"]) > 0, \" entry list is missing or empty\"\n    \n        # Link validation\n        link = response.get(\"link\", [{}])[0]\n        link_url = link.get(\"url\")\n        assert link_url is not None, \" link[0].url is missing\"\n>       assert link_url.startswith(context.baseUrl), f\"link[0].url should start with '{context.baseUrl}', got '{link_url}'\"\nE       AssertionError: link[0].url should start with 'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4', got 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'\nE       assert False\nE        +  where False = <built-in method startswith of str object at 0x7f026877af10>('https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4')\nE        +    where <built-in method startswith of str object at 0x7f026877af10> = 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'.startswith\nE        +    and   'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4' = <utilities.context.ScenarioContext object at 0x7f026897ca90>.baseUrl\n\nfeatures/APITests/steps/test_search_steps.py:281: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1765545759778,"stop":1765545759778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1765545759781,"stop":1765545761500,"duration":1719},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1765546222251,"stop":1765546222251,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1765546222252,"stop":1765546223824,"duration":1572},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/search.feature: Flu event is created and search post request fetch the only one record matched with identifier and _elements","status":"failed","statusMessage":"AssertionError: link[0].url should start with 'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4', got 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'\nassert False\n +  where False = <built-in method startswith of str object at 0x7f026877af10>('https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4')\n +    where <built-in method startswith of str object at 0x7f026877af10> = 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'.startswith\n +    and   'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4' = <utilities.context.ScenarioContext object at 0x7f026897ca90>.baseUrl","statusTrace":"fixturefunc = <function validate_correct_immunization_event_with_elements at 0x7f0269474f40>\nrequest = <FixtureRequest for <Function test_flu_event_is_created_and_search_post_request_fetch_the_only_one_record_matched_with_identifier_and__elements>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f026897ca90>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f026897ca90>\n\n    @then('correct immunization event is returned in the response with only specified elements')\n    def validate_correct_immunization_event_with_elements(context):\n        response = context.response.json()\n        assert response.get(\"resourceType\") == \"Bundle\", \"resourceType should be 'Bundle'\"\n        assert response.get(\"type\") == \"searchset\", \"type should be 'searchset'\"\n        assert isinstance(response.get(\"entry\"), list) and len(response[\"entry\"]) > 0, \" entry list is missing or empty\"\n    \n        # Link validation\n        link = response.get(\"link\", [{}])[0]\n        link_url = link.get(\"url\")\n        assert link_url is not None, \" link[0].url is missing\"\n>       assert link_url.startswith(context.baseUrl), f\"link[0].url should start with '{context.baseUrl}', got '{link_url}'\"\nE       AssertionError: link[0].url should start with 'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4', got 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'\nE       assert False\nE        +  where False = <built-in method startswith of str object at 0x7f026877af10>('https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4')\nE        +    where <built-in method startswith of str object at 0x7f026877af10> = 'https://internal-dev.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4/Immunization?identifier=https://supplierABC/identifiers/vacc|f8af51a7-e8bc-4fbd-89c9-be42981e587d&_elements=id,meta'.startswith\nE        +    and   'https://internal-qa.api.service.nhs.uk/immunisation-fhir-api/FHIR/R4' = <utilities.context.ScenarioContext object at 0x7f026897ca90>.baseUrl\n\nfeatures/APITests/steps/test_search_steps.py:281: AssertionError","steps":[],"attachments":[{"uid":"bef75cc566573c0d","name":"Step Passed: I have created a valid vaccination record","source":"bef75cc566573c0d.txt","type":"text/plain","size":60},{"uid":"cd3110000d4c4a5b","name":"Step Passed: Send a search request with Post method using identifier and _elements header for Immunization event created","source":"cd3110000d4c4a5b.txt","type":"text/plain","size":126},{"uid":"a093c9d7de4f927","name":"Step Passed: The request will be successful with the status code '200'","source":"a093c9d7de4f927.txt","type":"text/plain","size":76},{"uid":"671039d3f15cbff2","name":"Step Failed: correct immunization event is returned in the response with only specified elements","source":"671039d3f15cbff2.txt","type":"text/plain","size":999},{"uid":"e12da07475d1ee2","name":"stdout","source":"e12da07475d1ee2.txt","type":"text/plain","size":4337}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":5,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Search the immunization of a patient"},{"name":"feature","value":"Search the immunization of a patient"},{"name":"tag","value":"Delete_cleanUp"},{"name":"tag","value":"vaccine_type_FLU"},{"name":"tag","value":"functional"},{"name":"tag","value":"Search_Feature"},{"name":"tag","value":"patient_id_Random"},{"name":"tag","value":"supplier_name_Postman_Auth"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervm6qbrg"},{"name":"thread","value":"2536-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_search_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":22,"unknown":0,"total":24},"items":[{"uid":"a1de00394fb28545","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/180/#testresult/a1de00394fb28545","status":"broken","statusDetails":"requests.exceptions.InvalidURL: URL has an invalid label.","time":{"start":1765545418944,"stop":1765545418946,"duration":2}},{"uid":"80c4843373b063f6","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/179/#testresult/80c4843373b063f6","status":"passed","time":{"start":1765466133204,"stop":1765466137450,"duration":4246}},{"uid":"572381031a7b0a7f","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/177/#testresult/572381031a7b0a7f","status":"passed","time":{"start":1765398823269,"stop":1765398828715,"duration":5446}},{"uid":"a2064891ccd41660","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/176/#testresult/a2064891ccd41660","status":"passed","time":{"start":1765385302154,"stop":1765385305890,"duration":3736}},{"uid":"24804a97f332e6a7","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/175/#testresult/24804a97f332e6a7","status":"passed","time":{"start":1765000997905,"stop":1765001002026,"duration":4121}},{"uid":"5225891554e3ff5c","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/173/#testresult/5225891554e3ff5c","status":"passed","time":{"start":1764972727232,"stop":1764972730992,"duration":3760}},{"uid":"92c06cadaf74f6c4","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/171/#testresult/92c06cadaf74f6c4","status":"passed","time":{"start":1764333325356,"stop":1764333328112,"duration":2756}},{"uid":"18be8282f72bc454","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/170/#testresult/18be8282f72bc454","status":"passed","time":{"start":1764257025438,"stop":1764257029641,"duration":4203}},{"uid":"1dfef3e055a21852","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/169/#testresult/1dfef3e055a21852","status":"passed","time":{"start":1764236367627,"stop":1764236371877,"duration":4250}},{"uid":"a201355fc279956e","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/168/#testresult/a201355fc279956e","status":"passed","time":{"start":1764231384882,"stop":1764231389120,"duration":4238}},{"uid":"b449d04cde9a61ad","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/167/#testresult/b449d04cde9a61ad","status":"passed","time":{"start":1764184285604,"stop":1764184289414,"duration":3810}},{"uid":"bdd9edc459f38933","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/166/#testresult/bdd9edc459f38933","status":"passed","time":{"start":1764183048304,"stop":1764183051561,"duration":3257}},{"uid":"6fb2b3d41adcbfe0","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/165/#testresult/6fb2b3d41adcbfe0","status":"passed","time":{"start":1764182299219,"stop":1764182303041,"duration":3822}},{"uid":"5bf8c53dfee88690","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/164/#testresult/5bf8c53dfee88690","status":"passed","time":{"start":1764148109049,"stop":1764148112696,"duration":3647}},{"uid":"58487be5846c26bc","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/162/#testresult/58487be5846c26bc","status":"passed","time":{"start":1764003387444,"stop":1764003392162,"duration":4718}},{"uid":"d177370c6c15f749","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/159/#testresult/d177370c6c15f749","status":"passed","time":{"start":1763998409710,"stop":1763998412944,"duration":3234}},{"uid":"483a368466a57e4e","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/158/#testresult/483a368466a57e4e","status":"passed","time":{"start":1763997074317,"stop":1763997078513,"duration":4196}},{"uid":"8a81e716f9649a6c","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/157/#testresult/8a81e716f9649a6c","status":"passed","time":{"start":1763993079857,"stop":1763993082670,"duration":2813}},{"uid":"52f70b00c9295f7c","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/156/#testresult/52f70b00c9295f7c","status":"passed","time":{"start":1763555838016,"stop":1763555841802,"duration":3786}},{"uid":"3af96e93f1700fdf","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/155/#testresult/3af96e93f1700fdf","status":"passed","time":{"start":1763366890240,"stop":1763366894929,"duration":4689}}]},"tags":["Search_Feature","vaccine_type_FLU","functional","patient_id_Random","supplier_name_Postman_Auth","Delete_cleanUp"]},"source":"8b1e84edfd6e87ce.json","parameterValues":[]}
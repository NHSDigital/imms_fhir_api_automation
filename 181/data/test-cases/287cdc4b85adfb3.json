{"uid":"287cdc4b85adfb3","name":"Verify that the immunisation events retrieved in the response of Search API should be within Date From and Date To range","fullName":"features.APITests.steps.test_search_steps#test_verify_that_the_immunisation_events_retrieved_in_the_response_of_search_api_should_be_within_date_from_and_date_to_range","historyId":"b5409b314bc1210c74413420af39cb03","time":{"start":1765546122785,"stop":1765546124994,"duration":2209},"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/search.feature: Verify that the immunisation events retrieved in the response of Search API should be within Date From and Date To range","descriptionHtml":"<p>/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/search.feature: Verify that the immunisation events retrieved in the response of Search API should be within Date From and Date To range</p>\n","status":"failed","statusMessage":"AssertionError: No entries found in the search response.\nassert []\n +  where [] = FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0).entry\n +    where FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0) = <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>.parsed_search_object","statusTrace":"fixturefunc = <function validateDateRange at 0x7f02694745e0>\nrequest = <FixtureRequest for <Function test_verify_that_the_immunisation_events_retrieved_in_the_response_of_search_api_should_be_within_date_from_and_date_to_range[9728403348-FLU-2025-01-01-2025-06-04]>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>\n\n    @then(\"The occurrenceDateTime of the immunization events should be within the Date From and Date To range\")\n    def validateDateRange(context):\n        data = context.response.json()\n        context.parsed_search_object = parse_FHIR_immunization_response(data)\n    \n        params = getattr(context, \"params\", getattr(context, \"request\", {}))\n    \n        if isinstance(params, str):\n            parsed = parse_qs(params)\n            params = {k: v[0] for k, v in parsed.items()} if parsed else {}\n    \n        dateFrom = params.get(\"-date.from\")\n        dateTo = params.get(\"-date.to\")\n    \n>       assert context.parsed_search_object.entry, \"No entries found in the search response.\"\nE       AssertionError: No entries found in the search response.\nE       assert []\nE        +  where [] = FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0).entry\nE        +    where FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0) = <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>.parsed_search_object\n\nfeatures/APITests/steps/test_search_steps.py:178: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1765545759778,"stop":1765545759778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1765545759781,"stop":1765545761500,"duration":1719},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1765546122786,"stop":1765546124350,"duration":1564},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1765546210615,"stop":1765546210615,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/imms_fhir_api_automation/imms_fhir_api_automation/features/APITests/search.feature: Verify that the immunisation events retrieved in the response of Search API should be within Date From and Date To range","status":"failed","statusMessage":"AssertionError: No entries found in the search response.\nassert []\n +  where [] = FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0).entry\n +    where FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0) = <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>.parsed_search_object","statusTrace":"fixturefunc = <function validateDateRange at 0x7f02694745e0>\nrequest = <FixtureRequest for <Function test_verify_that_the_immunisation_events_retrieved_in_the_response_of_search_api_should_be_within_date_from_and_date_to_range[9728403348-FLU-2025-01-01-2025-06-04]>>\nkwargs = {'context': <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\nvenv/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>\n\n    @then(\"The occurrenceDateTime of the immunization events should be within the Date From and Date To range\")\n    def validateDateRange(context):\n        data = context.response.json()\n        context.parsed_search_object = parse_FHIR_immunization_response(data)\n    \n        params = getattr(context, \"params\", getattr(context, \"request\", {}))\n    \n        if isinstance(params, str):\n            parsed = parse_qs(params)\n            params = {k: v[0] for k, v in parsed.items()} if parsed else {}\n    \n        dateFrom = params.get(\"-date.from\")\n        dateTo = params.get(\"-date.to\")\n    \n>       assert context.parsed_search_object.entry, \"No entries found in the search response.\"\nE       AssertionError: No entries found in the search response.\nE       assert []\nE        +  where [] = FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0).entry\nE        +    where FHIRImmunizationResponse(resourceType='Bundle', type='searchset', link=[Link(relation='self', url='https://internal-de...hs-number%7C9728403348&-date.from=2025-01-01&-date.to=2025-06-04&_include=Immunization%3Apatient')], entry=[], total=0) = <utilities.context.ScenarioContext object at 0x7f0268a9b0d0>.parsed_search_object\n\nfeatures/APITests/steps/test_search_steps.py:178: AssertionError","steps":[],"attachments":[{"uid":"1edab903d5491f17","name":"Step Passed: Send a search request with GET method with valid NHS Number '9728403348' and Disease Type 'FLU' and Date From '2025-01-01' and Date To '2025-06-04'","source":"1edab903d5491f17.txt","type":"text/plain","size":166},{"uid":"8ab36b1a92a3297a","name":"Step Passed: The request will be successful with the status code '200'","source":"8ab36b1a92a3297a.txt","type":"text/plain","size":76},{"uid":"e14cd197f6be227","name":"Step Failed: The occurrenceDateTime of the immunization events should be within the Date From and Date To range","source":"e14cd197f6be227.txt","type":"text/plain","size":778},{"uid":"f9f9250d67fe3628","name":"stdout","source":"f9f9250d67fe3628.txt","type":"text/plain","size":207}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Search the immunization of a patient"},{"name":"feature","value":"Search the immunization of a patient"},{"name":"tag","value":"Search_Feature"},{"name":"tag","value":"functional"},{"name":"tag","value":"supplier_name_Postman_Auth"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervm6qbrg"},{"name":"thread","value":"2536-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_search_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"_pytest_bdd_example","value":"{'NHSNumber': '9728403348', 'vaccine_type': 'FLU', 'DateFrom': '2025-01-01', 'DateTo': '2025-06-04'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":22,"unknown":0,"total":24},"items":[{"uid":"1cb5815cdd6232d9","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/180/#testresult/1cb5815cdd6232d9","status":"broken","statusDetails":"requests.exceptions.InvalidURL: URL has an invalid label.","time":{"start":1765545416100,"stop":1765545416102,"duration":2}},{"uid":"5d88f2dc604d21b7","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/179/#testresult/5d88f2dc604d21b7","status":"passed","time":{"start":1765466028635,"stop":1765466035334,"duration":6699}},{"uid":"bf66caf288564248","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/177/#testresult/bf66caf288564248","status":"passed","time":{"start":1765398736205,"stop":1765398739274,"duration":3069}},{"uid":"a3499afb99fdefb5","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/176/#testresult/a3499afb99fdefb5","status":"passed","time":{"start":1765385210160,"stop":1765385212691,"duration":2531}},{"uid":"72fba2264604987f","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/175/#testresult/72fba2264604987f","status":"passed","time":{"start":1765000899108,"stop":1765000902542,"duration":3434}},{"uid":"af40fe6392d18334","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/173/#testresult/af40fe6392d18334","status":"passed","time":{"start":1764972647577,"stop":1764972650274,"duration":2697}},{"uid":"5989cf9a7224b098","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/171/#testresult/5989cf9a7224b098","status":"passed","time":{"start":1764333248326,"stop":1764333250839,"duration":2513}},{"uid":"f88ff7b55f91032f","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/170/#testresult/f88ff7b55f91032f","status":"passed","time":{"start":1764256905217,"stop":1764256908532,"duration":3315}},{"uid":"695628ade6369472","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/169/#testresult/695628ade6369472","status":"passed","time":{"start":1764236272317,"stop":1764236275956,"duration":3639}},{"uid":"80c6cedc5504c38","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/168/#testresult/80c6cedc5504c38","status":"passed","time":{"start":1764231282286,"stop":1764231285922,"duration":3636}},{"uid":"b09dc9ee39f0cbcc","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/167/#testresult/b09dc9ee39f0cbcc","status":"passed","time":{"start":1764184187842,"stop":1764184190993,"duration":3151}},{"uid":"1995d50a0370cf91","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/166/#testresult/1995d50a0370cf91","status":"passed","time":{"start":1764182973496,"stop":1764182976291,"duration":2795}},{"uid":"da838240c0912f78","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/165/#testresult/da838240c0912f78","status":"passed","time":{"start":1764182204575,"stop":1764182207711,"duration":3136}},{"uid":"f09f08f1f79fb7f5","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/164/#testresult/f09f08f1f79fb7f5","status":"passed","time":{"start":1764148032719,"stop":1764148048262,"duration":15543}},{"uid":"2b8436797934af64","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/162/#testresult/2b8436797934af64","status":"passed","time":{"start":1764003294131,"stop":1764003297664,"duration":3533}},{"uid":"33565e7a275c3b6d","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/159/#testresult/33565e7a275c3b6d","status":"passed","time":{"start":1763998349909,"stop":1763998352211,"duration":2302}},{"uid":"cad87cb00f91a9c3","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/158/#testresult/cad87cb00f91a9c3","status":"passed","time":{"start":1763996981354,"stop":1763996984749,"duration":3395}},{"uid":"acda6508f3b7a97b","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/157/#testresult/acda6508f3b7a97b","status":"passed","time":{"start":1763993019800,"stop":1763993022224,"duration":2424}},{"uid":"4c6b7fb7f9d7ac8","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/156/#testresult/4c6b7fb7f9d7ac8","status":"passed","time":{"start":1763555752407,"stop":1763555755762,"duration":3355}},{"uid":"eaaae3ac1707f9b","reportUrl":"https://NHSDigital.github.io/imms_fhir_api_automation/155/#testresult/eaaae3ac1707f9b","status":"passed","time":{"start":1763366785473,"stop":1763366789059,"duration":3586}}]},"tags":["Search_Feature","functional","supplier_name_Postman_Auth"]},"source":"287cdc4b85adfb3.json","parameterValues":["{'NHSNumber': '9728403348', 'vaccine_type': 'FLU', 'DateFrom': '2025-01-01', 'DateTo': '2025-06-04'}"]}